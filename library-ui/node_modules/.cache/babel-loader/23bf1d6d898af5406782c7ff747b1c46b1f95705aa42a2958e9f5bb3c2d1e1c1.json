{"ast":null,"code":"var _jsxFileName = \"E:\\\\6\\u0441\\u0435\\u043C\\\\Modsen\\\\\\u0417\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435\\\\LibraryAPI\\\\library-ui\\\\src\\\\pages\\\\Login.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { login, register } from \"../api\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [showRegister, setShowRegister] = useState(false); // Состояние для окна регистрации\n  const navigate = useNavigate();\n  const handleLogin = async () => {\n    try {\n      const response = await login(email, password);\n      if (!response.token) throw new Error(\"Токен не получен\");\n      localStorage.setItem(\"token\", response.accessToken);\n      navigate(\"/books\");\n    } catch (error) {\n      setError(\"Ошибка авторизации\");\n      console.error(\"Ошибка:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center justify-center h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"\\u0412\\u0445\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"border p-2 mb-2\",\n      type: \"email\",\n      placeholder: \"Email\",\n      value: email,\n      onChange: e => setEmail(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"border p-2 mb-2\",\n      type: \"password\",\n      placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      value: password,\n      onChange: e => setPassword(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-blue-500 text-white px-4 py-2 mb-2\",\n      onClick: handleLogin,\n      children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"text-blue-500\",\n      onClick: () => setShowRegister(true),\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), showRegister && /*#__PURE__*/_jsxDEV(RegisterModal, {\n      onClose: () => setShowRegister(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n};\n\n// Окно регистрации\n_s(Login, \"eHonvDsBQxALiPUmJDgzoxMfJs0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nconst RegisterModal = ({\n  onClose\n}) => {\n  _s2();\n  const [regEmail, setRegEmail] = useState(\"\");\n  const [regPassword, setRegPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const handleRegister = async () => {\n    try {\n      await register(regEmail, regPassword);\n      setSuccess(\"Регистрация успешна! Теперь войдите.\");\n      setError(\"\");\n    } catch (error) {\n      setError(\"Ошибка регистрации\");\n      setSuccess(\"\");\n      console.error(\"Ошибка:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4\",\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-500\",\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"border p-2 mb-2 w-full\",\n        type: \"email\",\n        placeholder: \"Email\",\n        value: regEmail,\n        onChange: e => setRegEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"border p-2 mb-2 w-full\",\n        type: \"password\",\n        placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        value: regPassword,\n        onChange: e => setRegPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-500 text-white px-4 py-2\",\n          onClick: handleRegister,\n          children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-gray-500 text-white px-4 py-2\",\n          onClick: onClose,\n          children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s2(RegisterModal, \"t8JwHNdcVcnJL2qIbcjUmKUIRYw=\");\n_c2 = RegisterModal;\nexport default Login;\nvar _c, _c2;\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"RegisterModal\");","map":{"version":3,"names":["React","useState","login","register","useNavigate","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","error","setError","showRegister","setShowRegister","navigate","handleLogin","response","token","Error","localStorage","setItem","accessToken","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","RegisterModal","onClose","_c","_s2","regEmail","setRegEmail","regPassword","setRegPassword","success","setSuccess","handleRegister","_c2","$RefreshReg$"],"sources":["E:/6сем/Modsen/Задание/LibraryAPI/library-ui/src/pages/Login.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { login, register } from \"../api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [showRegister, setShowRegister] = useState(false); // Состояние для окна регистрации\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      const response = await login(email, password);\r\n      if (!response.token) throw new Error(\"Токен не получен\");\r\n\r\n      localStorage.setItem(\"token\", response.accessToken);\r\n      navigate(\"/books\");\r\n    } catch (error: any) {\r\n      setError(\"Ошибка авторизации\");\r\n      console.error(\"Ошибка:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Вход</h2>\r\n      {error && <p className=\"text-red-500\">{error}</p>}\r\n      <input className=\"border p-2 mb-2\" type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\r\n      <input className=\"border p-2 mb-2\" type=\"password\" placeholder=\"Пароль\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n      <button className=\"bg-blue-500 text-white px-4 py-2 mb-2\" onClick={handleLogin}>Войти</button>\r\n      <button className=\"text-blue-500\" onClick={() => setShowRegister(true)}>Зарегистрироваться</button>\r\n\r\n      {showRegister && <RegisterModal onClose={() => setShowRegister(false)} />}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Окно регистрации\r\nconst RegisterModal: React.FC<{ onClose: () => void }> = ({ onClose }) => {\r\n  const [regEmail, setRegEmail] = useState(\"\");\r\n  const [regPassword, setRegPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  const handleRegister = async () => {\r\n    try {\r\n      await register(regEmail, regPassword);\r\n      setSuccess(\"Регистрация успешна! Теперь войдите.\");\r\n      setError(\"\");\r\n    } catch (error: any) {\r\n      setError(\"Ошибка регистрации\");\r\n      setSuccess(\"\");\r\n      console.error(\"Ошибка:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n        <h2 className=\"text-xl font-bold mb-4\">Регистрация</h2>\r\n        {error && <p className=\"text-red-500\">{error}</p>}\r\n        {success && <p className=\"text-green-500\">{success}</p>}\r\n        <input className=\"border p-2 mb-2 w-full\" type=\"email\" placeholder=\"Email\" value={regEmail} onChange={(e) => setRegEmail(e.target.value)} />\r\n        <input className=\"border p-2 mb-2 w-full\" type=\"password\" placeholder=\"Пароль\" value={regPassword} onChange={(e) => setRegPassword(e.target.value)} />\r\n        <div className=\"flex justify-between\">\r\n          <button className=\"bg-blue-500 text-white px-4 py-2\" onClick={handleRegister}>Зарегистрироваться</button>\r\n          <button className=\"bg-gray-500 text-white px-4 py-2\" onClick={onClose}>Закрыть</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,KAAK,EAAEC,QAAQ,QAAQ,QAAQ;AACxC,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,KAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACzD,MAAMgB,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAE9B,MAAMc,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACO,KAAK,EAAEE,QAAQ,CAAC;MAC7C,IAAI,CAACQ,QAAQ,CAACC,KAAK,EAAE,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;MAExDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,QAAQ,CAACK,WAAW,CAAC;MACnDP,QAAQ,CAAC,QAAQ,CAAC;IACpB,CAAC,CAAC,OAAOJ,KAAU,EAAE;MACnBC,QAAQ,CAAC,oBAAoB,CAAC;MAC9BW,OAAO,CAACZ,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;IACjC;EACF,CAAC;EAED,oBACEP,OAAA;IAAKoB,SAAS,EAAC,oDAAoD;IAAAC,QAAA,gBACjErB,OAAA;MAAIoB,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAC;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAChDlB,KAAK,iBAAIP,OAAA;MAAGoB,SAAS,EAAC,cAAc;MAAAC,QAAA,EAAEd;IAAK;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjDzB,OAAA;MAAOoB,SAAS,EAAC,iBAAiB;MAACM,IAAI,EAAC,OAAO;MAACC,WAAW,EAAC,OAAO;MAACC,KAAK,EAAEzB,KAAM;MAAC0B,QAAQ,EAAGC,CAAC,IAAK1B,QAAQ,CAAC0B,CAAC,CAACC,MAAM,CAACH,KAAK;IAAE;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC/HzB,OAAA;MAAOoB,SAAS,EAAC,iBAAiB;MAACM,IAAI,EAAC,UAAU;MAACC,WAAW,EAAC,sCAAQ;MAACC,KAAK,EAAEvB,QAAS;MAACwB,QAAQ,EAAGC,CAAC,IAAKxB,WAAW,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK;IAAE;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACzIzB,OAAA;MAAQoB,SAAS,EAAC,uCAAuC;MAACY,OAAO,EAAEpB,WAAY;MAAAS,QAAA,EAAC;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAC9FzB,OAAA;MAAQoB,SAAS,EAAC,eAAe;MAACY,OAAO,EAAEA,CAAA,KAAMtB,eAAe,CAAC,IAAI,CAAE;MAAAW,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAElGhB,YAAY,iBAAIT,OAAA,CAACiC,aAAa;MAACC,OAAO,EAAEA,CAAA,KAAMxB,eAAe,CAAC,KAAK;IAAE;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtE,CAAC;AAEV,CAAC;;AAED;AAAAvB,EAAA,CAlCMD,KAAe;EAAA,QAKFH,WAAW;AAAA;AAAAqC,EAAA,GALxBlC,KAAe;AAmCrB,MAAMgC,aAAgD,GAAGA,CAAC;EAAEC;AAAQ,CAAC,KAAK;EAAAE,GAAA;EACxE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC4C,WAAW,EAAEC,cAAc,CAAC,GAAG7C,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC8C,OAAO,EAAEC,UAAU,CAAC,GAAG/C,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMgD,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAM9C,QAAQ,CAACwC,QAAQ,EAAEE,WAAW,CAAC;MACrCG,UAAU,CAAC,sCAAsC,CAAC;MAClDlC,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,OAAOD,KAAU,EAAE;MACnBC,QAAQ,CAAC,oBAAoB,CAAC;MAC9BkC,UAAU,CAAC,EAAE,CAAC;MACdvB,OAAO,CAACZ,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;IACjC;EACF,CAAC;EAED,oBACEP,OAAA;IAAKoB,SAAS,EAAC,uEAAuE;IAAAC,QAAA,eACpFrB,OAAA;MAAKoB,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDrB,OAAA;QAAIoB,SAAS,EAAC,wBAAwB;QAAAC,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACtDlB,KAAK,iBAAIP,OAAA;QAAGoB,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAEd;MAAK;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAChDgB,OAAO,iBAAIzC,OAAA;QAAGoB,SAAS,EAAC,gBAAgB;QAAAC,QAAA,EAAEoB;MAAO;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACvDzB,OAAA;QAAOoB,SAAS,EAAC,wBAAwB;QAACM,IAAI,EAAC,OAAO;QAACC,WAAW,EAAC,OAAO;QAACC,KAAK,EAAES,QAAS;QAACR,QAAQ,EAAGC,CAAC,IAAKQ,WAAW,CAACR,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC5IzB,OAAA;QAAOoB,SAAS,EAAC,wBAAwB;QAACM,IAAI,EAAC,UAAU;QAACC,WAAW,EAAC,sCAAQ;QAACC,KAAK,EAAEW,WAAY;QAACV,QAAQ,EAAGC,CAAC,IAAKU,cAAc,CAACV,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACtJzB,OAAA;QAAKoB,SAAS,EAAC,sBAAsB;QAAAC,QAAA,gBACnCrB,OAAA;UAAQoB,SAAS,EAAC,kCAAkC;UAACY,OAAO,EAAEW,cAAe;UAAAtB,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACzGzB,OAAA;UAAQoB,SAAS,EAAC,kCAAkC;UAACY,OAAO,EAAEE,OAAQ;UAAAb,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACW,GAAA,CAjCIH,aAAgD;AAAAW,GAAA,GAAhDX,aAAgD;AAmCtD,eAAehC,KAAK;AAAC,IAAAkC,EAAA,EAAAS,GAAA;AAAAC,YAAA,CAAAV,EAAA;AAAAU,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}